<!-- prettier-ignore -->
<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="/style.css" />
    <title>mielota</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
  </head>
  <body>
    <header class="log-title">
      <h1><a href="logs.html">../</a>Archinstall</h1>
      <p>créé le 15 août 2025</p>
    </header>
    <main>
      <hr />
      <section class="fat">
        <h2>Introduction</h2>
        <p>
          Tutoriel rapide pour
          <a href="https://wiki.archlinux.org/title/Installation_guide"
            >installer</a
          >
          Arch Linux.
        </p>
        <p>
          Je suppose que vous avez un minimum d'expériences avec Linux et Arch,
          et que vous avez un système EFI avec un processeur d'architecture
          x86_64. Et aussi que vous voulez installer Arch sur un disque entier.
        </p>
        <p>Bref bootez sur votre clé usb ou quoi et on commence.</p>
      </section>
      <section class="fat">
        <h2>Confort</h2>
        <p>Changer la disposition du clavier</p>
        <pre class="shell"># loadkeys fr-latin1</pre>
        <p>Agrandir la police du tty si elle vous paraît trop petite :</p>
        <pre class="shell"># setfont ter-132b</pre>
      </section>
      <section class="fat">
        <h2>Wi-Fi</h2>
        <p>Connectez vous à votre wifi avec la commande suivante :</p>
        <pre
          class="shell"
        ># iwctl station <span class="warn">device</span> connect <span class="warn">wifi_name</span> --passphrase <span class="warn">wifi_password</span></pre>
        <p>
          Notez que vous pouvez obtenir le nom de votre
          <span class="warn">device</span> avec :
        </p>
        <pre class="shell"># iwctl device list</pre>
        <p>
          Et les réseaux wifi disponibles (<span class="warn">wifi_name</span>)
          avec :
        </p>
        <pre class="shell">
# iwctl station <span class="warn">device</span> scan
# iwctl station <span class="warn">device</span> get-networks</pre>
        <p>Pour voir si vous avez réussi à vous connecter à internet :</p>
        <pre class="shell"># ping -c 2 archlinux.org</pre>
        <p>
          Vous devriez avoir des lignes qui ressemblent à "64 bytes from
          archlinux.org"..
        </p>
      </section>
      <section class="fat">
        <h2>Heure</h2>
        <p>Configurez l'horloge</p>
        <pre class="shell"># timedatectl set-timezone Europe/Paris</pre>
      </section>
      <section class="fat">
        <h2>S'occuper des disques</h2>
        <p class="urgent">
          Les opérations de cette section vont supprimer toutes les données de
          votre disque.
        </p>
        <p>Afficher les disques disponibles :</p>
        <pre class="shell">
# lsblk
...
nvme0n1     259:0    0 931,5G  0 disk
├─nvme0n1p1 259:1    0     1G  0 part
└─nvme0n1p2 259:2    0 930,5G  0 part
...</pre
        >
        <p>
          Pour partitionner le disque sur lequel vous souhaitez installer
          archlinux (le mien est nvme0n1) exécutez :
        </p>
        <pre class="shell"># cfdisk /dev/nvme0n1</pre>
        <p>
          Ici, je veux installer arch linux sur mon ssd nvme nommé nvme0n1, je
          dois créer deux partitions, une première de 1G de type 'EFI System' et
          une autre partition prenant la taille restante du disque de type
          'Linux filesystem'
        </p>
        <p>
          Ma partition EFI System est nvme0n1p1 et ma partition Linux filesystem
          est nvme0n1p2
        </p>
        <p>Maintenant on formate les partitions.</p>
        <p>FAT32 pour notre partition de 1G que l'on va nommer ESP :</p>
        <pre class="shell"># mkfs.fat -F 32 -n ESP /dev/nvme0n1p1</pre>
        <p>EXT4 pour notre deuxième partition que l'on va nommer ROOT :</p>
        <pre class="shell"># mkfs.ext4 -L ROOT /dev/nvme0n1p2</pre>
        <h2>Monter les partitions</h2>
        <p class="urgent">
          Attention, veillez à bien monter les partitions dans cet ordre :
        </p>
        <pre class="shell">
# mount /dev/disk/by-label/ROOT /mnt
# mount --mkdir /dev/disk/by-label/ESP /mnt/boot/EFI</pre
        >
        <p>
          Maintenant vous devriez avoir cette affichage si vous affichez vos
          disques :
        </p>
        <pre class="shell">
# lsblk
...
nvme0n1     259:0    0 931,5G  0 disk
├─nvme0n1p1 259:1    0     1G  0 part <span class="urgent">/mnt/boot/EFI</span>
└─nvme0n1p2 259:2    0 930,5G  0 part <span class="urgent">/mnt</span>
...</pre>
      </section>
      <section class="fat">
        <h2>Configuration des mirroirs (ou dépôts)</h2>
        <p>
          Nous allons configurer les mirroirs du système pour essayer d'avoir
          des vitesses de téléchargements plus efficaces que la configuration de
          base située dans /etc/pacman.d/mirrorlist
        </p>
        <p>
          Pour cela on utilise la commande reflector qui basées sur des critères
          que l'on définit, choisit les mirroirs et les sauvegarde dans le
          fichier /etc/pacman.d/mirrorlist. Cette commande peut prendre un
          moment à s'éxécuter :
        </p>
        <pre class="shell">
# reflector --country France --latest 10 --protocol https --sort rate --save /etc/pacman.d/mirrorlist</pre
        >
        <h2>Installation des paquets sur le système</h2>
        <p>
          Remplacez le paquet
          <span class="warn">processeur-ucode</span> par
          <span class="warn">amd-ucode</span> ou
          <span class="warn">intel-ucode</span> suivant la marque de votre
          processeur.
        </p>
        <p>
          Remplacez le paquet <span class="warn">vim</span> par
          <span class="warn">micro</span> ou <span class="warn">nano</span> si
          vous ne connaissez pas vim.
        </p>
        <p>
          Selon la vitesse de votre connexion internet le téléchargement sera
          plus ou moins long.
        </p>
        <pre
          class="shell"
        ># pacstrap -K /mnt base base-devel <span class="warn">processeur-ucode</span> linux linux-firmware grub efibootmgr sof-firmware networkmanager <span class="warn">vim</span></pre>
      </section>
      <section class="fat">
        <h2>Configuration système</h2>
        <p>
          D'abord on doit dire au système comment monter les disques au
          démarrage du système :
        </p>
        <pre class="shell"># genfstab -U /mnt >> /mnt/etc/fstab</pre>
        <p>
          Afficher le contenu de ce fichier et vérifier que vous avez bien vos
          deux partitions présentes dans le fichier, sinon on a un gros
          problème.
        </p>
        <p>
          Vous devriez avoir deux lignes dans le fichier qui ressemblent à ça :
        </p>
        <pre class="shell">
# cat /mnt/etc/fstab
...
UUID=e1615781-6a9a-4971-9cb2-3a7f1cc118b5	/         	ext4 ...
...
UUID=E108-182B      	/boot     	vfat ....</pre
        >
        <p>
          Maintenant on se connecte en tant que root sur le système du disque où
          l'on a tout installé :
        </p>
        <pre class="shell"># arch-chroot /mnt</pre>
        <p>On configure encore la time zone:</p>
        <pre class="shell">
# ln -sf /usr/share/zoneinfo/Europe/Paris /etc/localtime
# hwclock --systohc</pre
        >
        <p>Configurer le français</p>
        <pre class="shell">
# echo "fr_FR.UTF-8 UTF-8" >> /etc/locale.gen
# locale-gen
# echo "LANG=fr_FR.UTF-8" > /etc/locale.conf
# echo "KEYMAP=fr-latin1" > /etc/vconsole.conf
</pre
        >
        <p>
          Choisir le <span class="warn">nom de son pc</span>.Cela affecte le nom
          que votre appareil aura sur votre réseau wifi local.
        </p>
        <pre
          class="shell"
        ># echo "<span class="warn">nom_du_pc</span>" > /etc/hostname</pre>
        <p>
          Activer NetworkManager.service pour vous connectez à internet à chaque
          fois que vous allumerez l'appareil :
        </p>
        <pre class="shell"># systemctl enable NetworkManager</pre>
        <p>
          Configurer un mot de passe pour l'administrateur système auquel vous
          êtes actuellement connecté :
        </p>
        <pre class="shell"># passwd</pre>
        <p>Ajouter un utilisateur :</p>
        <pre
          class="shell"
        ># useradd -m <span class="warn">nom_dutilisateur</span></pre>
        <p>Configurer le mot de passe à l'utilisateur :</p>
        <pre
          class="shell"
        ># passwd <span class="warn">nom_de_lutilisateur</span></pre>

        <h2>Configurer le son</h2>
        <p>Comme serveur son on va utiliser pipewire, installez le :</p>
        <pre class="shell"># pacman -S pipewire pipewire-pulse wireplumber</pre>
      </section>
      <section class="fat">
        <h2>Configurer GRUB</h2>
        <p>
          Le système est presque prêt, il faut juste configurer un bootloader
          (ici grub) pour que le système démarre correctement.
        </p>
        <p>Installer grub sur le système :</p>
        <pre class="shell">
# grub-install --target=x86_64-efi --efi-directory=/boot/EFI</pre
        >
        <p>Créer la configuration grub :</p>
        <pre class="shell"># grub-mkconfig -o /boot/grub/grub.cfg</pre>
      </section>
      <section class="fat">
        <h2>Finale</h2>
        <pre class="shell">
# exit
# reboot</pre
        >
        <p>
          Vous pouvez débrancher la clé usb, respirer. Si vous êtes sur un écran
          du style
        </p>
        <pre
          class="shell"
        ><span class="warn">nom_de_votre_machine</span> login :</pre>
        <p>
          Entrez votre nom d'utilisateur et mot de passe et vous êtes connecté.
          Vous pouvez vous connecter en tant qu'admin avec le login "root", ou
          la commande 'su -', vous pouvez ensuite installer des paquets avec
          'pacman' en tant qu'admin.
        </p>
        <h2>Reconnectez vous à internet.</h2>
        <p>
          Si vous essayez d'installer un paquet à l'aide de pacman, vous vous
          rendrez compte que vous n'êtes plus connecté à internet.
        </p>
        <p>Lister les réseaux wifi disponibles avec :</p>
        <pre class="shell"># nmcli device wifi list</pre>
        <p>Connectez vous avec :</p>
        <pre class="shell">
# nmcli device wifi connect <span class="warn">nom_du_wifi</span> --ask</pre>
        <p>
          La commande vous demandera un mot de passe si il y en a un sur votre
          wifi.
        </p>
        <p>
          Installez le Desktop Environment que vous voulez, suivez un tuto sur
          internet.
        </p>
      </section>
      <hr />
    </main>
    <footer>
      <section class="fat">
        <p>Bref bienvenue sur Arch beau gosse.</p>
        <img src="/res/logs/tux.png" alt="Une image du magnifique tux tenant un cd avec Arch dessus" width="45%">
        <p>Vous pouvez avoir une version script de tout ce code sur <a href="/scripts/march.sh">ce lien</a></p>
        <p>Faites bien attention à le lire, il formate entièment le disque !</p>
      </section>
    </footer>
  </body>
</html>
